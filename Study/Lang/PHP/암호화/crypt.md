### 암호화 알고리즘 crypt

>  출처 https://sjpison.tistory.com/138 



#### MD5에 대해 먼저 생각

해쉬 알고리즘 중 하나인 MD5는 얼마나 안전할까요??

처음엔 안전했지만 이제와서는 그다지 안전하지 않게 되어버린것 같습니다.

단방향 함수로 나온 MD5는 역방향 함수가 없을 거에요 

그런데 MD5로 암호화 한 암호문은 무작위로 대입으로 찾아낼 수 있습니다.

평문 자체가 단순하면, 그만큼 더 빨리 찾아낸다, 방법이 무작위 대입법이기 ㅒㄸ문에



이미 평문과 암호문을 대조해 놓은 테이블을 만드는 프로젝트도 있죠.



#### 우리가 만드는 모든 암호문에 대한 대조 테이블이 미리 만들어져 있다면, 큰일이네

그래서 Salt를 붙이는 방법이 사용되었습니다.

salt란 평문에 복잡한 문자열을 붙인 후 해싱을 하도록 하는 문자열입니다.

예를들어 test의 md5결과는  '098f6bcd4621d373cade4e832627b4f6'입니다.

여기에 3$%cdf3D라는 salt를 분이면

3$%cdf3Dtest의 결과값은  37bd669acc249b35287af02d15064a45입니다.

#### 이런 salt를 자동으로 만드렁 주는 함수 crpt()

crypt('passwd')

이렇게만 입력하면 자동으로 salt를 붙여서 암호문을 만들어줍니다.

그냥 만드는 것은 아니고 적당히 꼬아서 만들어 준다.

MD5인 코딩 한거에다가, base64_encoding 하고 거기에 문자열도 뒤집고 , 문자열 대치도 하고 해서 이상한 문자열을 만들어 줍니다.

 지금 **crypt('test')**를 한 결과값은 **$1$nzrg2LMv$tHkYvfZrZkviR5bXP28670** 네요~
그리고 이건 호출할 때마다 바뀝니다.

암호로 저장하면 매번 바뀌니 비교 불가능할 꺼같은데. $1$nzrg2LMv$ 이부분은 salt입니다.

그래서 그 salt값을 넣고 같은 평문을 넣으면 동일한 암호문이 나온다.

 crypt('test','$1$nzrg2LMv$') 를 호출하면 위와 동일한 결과가 나옵니다.



#### 암호화 비교 작업

```
$pass = crypt('test');

if(crypt('test',$pass) == $pass) {
    echo("암호 일치");
}
```

